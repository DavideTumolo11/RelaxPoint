<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | RelaxPoint</title>

    <!-- FONTS -->
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link as="style"
        href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B600%3B700%3B800"
        onload="this.rel='stylesheet'" rel="stylesheet" />

    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/admin/dashboard-admin.css">
</head>

<body class="admin-body">
    <div class="admin-container">

        <!-- HEADER ADMIN -->
        <div class="admin-header">
            <h1 class="admin-title">
                <i class="fas fa-shield-alt"></i> RelaxPoint Admin
            </h1>
            <p class="admin-subtitle">Pannello di controllo completo per la gestione della piattaforma</p>
            <div class="admin-user-info">
                <span class="admin-badge">
                    <i class="fas fa-user"></i> Admin: Amministratore
                </span>
                <span class="admin-badge">
                    <i class="fas fa-clock"></i> Ultimo accesso: Oggi, 14:30
                </span>
                <span class="admin-badge">
                    <i class="fas fa-server"></i> Server: Online
                </span>
            </div>
        </div>

        <!-- NAVIGAZIONE ADMIN -->
        <div class="admin-nav">
            <button class="admin-nav-item active" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </button>
            <button class="admin-nav-item" data-section="users">
                <i class="fas fa-users"></i> Utenti
            </button>
            <button class="admin-nav-item" data-section="professionals">
                <i class="fas fa-user-tie"></i> Professionisti
            </button>
            <button class="admin-nav-item" data-section="bookings">
                <i class="fas fa-calendar"></i> Prenotazioni
            </button>
            <button class="admin-nav-item" data-section="verification">
                <i class="fas fa-clipboard-check"></i> Verifiche
            </button>
            <button class="admin-nav-item" data-section="reports">
                <i class="fas fa-exclamation-triangle"></i> Segnalazioni
            </button>
            <button class="admin-nav-item" data-section="content">
                <i class="fas fa-edit"></i> Contenuti
            </button>
            <button class="admin-nav-item" data-section="system">
                <i class="fas fa-cogs"></i> Sistema
            </button>
            <button class="admin-nav-item" data-section="logs">
                <i class="fas fa-list-alt"></i> Log
            </button>
        </div>

        <!-- SEZIONE DASHBOARD -->
        <div id="dashboard-section" class="admin-section active">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-chart-line"></i> Panoramica Sistema
                </h2>
                <p class="section-description">
                    Vista generale delle statistiche e attività della piattaforma RelaxPoint
                </p>
            </div>

            <div class="section-instructions">
                <h4><i class="fas fa-info-circle"></i> Istruzioni Dashboard</h4>
                <ul>
                    <li><strong>Statistiche principali:</strong> Mostra i KPI più importanti aggiornati in tempo reale</li>
                    <li><strong>Attività recenti:</strong> Ultimi eventi e azioni sulla piattaforma</li>
                    <li><strong>Aggiornamento automatico:</strong> I dati si aggiornano ogni 30 secondi</li>
                    <li><strong>Azioni rapide:</strong> Accesso veloce alle sezioni più utilizzate</li>
                </ul>
            </div>

            <!-- STATISTICHE PRINCIPALI -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="total-users">1,247</div>
                    <div class="stat-label">Utenti Registrati</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +12% da ieri
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-professionals">156</div>
                    <div class="stat-label">Professionisti Attivi</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +8% da ieri
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="today-bookings">47</div>
                    <div class="stat-label">Prenotazioni Oggi</div>
                    <div class="stat-change negative">
                        <i class="fas fa-arrow-down"></i> -5% da ieri
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="monthly-revenue">€125,420</div>
                    <div class="stat-label">Entrate Mensili</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +23% dal mese scorso
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="pending-verifications">12</div>
                    <div class="stat-label">Verifiche in Attesa</div>
                    <div class="stat-change neutral">
                        <i class="fas fa-minus"></i> Invariato
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="active-reports">5</div>
                    <div class="stat-label">Segnalazioni Aperte</div>
                    <div class="stat-change negative">
                        <i class="fas fa-arrow-up"></i> +2 da ieri
                    </div>
                </div>
            </div>

            <!-- ATTIVITÀ RECENTI -->
            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Attività Recenti</h3>
                </div>
                <div id="recent-activities" class="log-container" style="max-height: 300px;">
                    <!-- Caricate dinamicamente da JavaScript -->
                </div>
            </div>
        </div>

        <!-- SEZIONE UTENTI -->
        <div id="users-section" class="admin-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-users"></i> Gestione Utenti
                </h2>
                <p class="section-description">
                    Amministra tutti gli utenti registrati sulla piattaforma
                </p>
            </div>

            <div class="section-instructions">
                <h4><i class="fas fa-info-circle"></i> Istruzioni Gestione Utenti</h4>
                <ul>
                    <li><strong>Stati utente:</strong> Attivo (può usare servizi), In attesa (email non confermata), Inattivo (account disabilitato), Bloccato (sospeso per violazioni)</li>
                    <li><strong>Approvazione:</strong> Gli utenti "In attesa" richiedono approvazione manuale se segnalati</li>
                    <li><strong>Modifica:</strong> Puoi modificare informazioni, stato account e permessi</li>
                    <li><strong>Eliminazione:</strong> L'eliminazione è permanente - usa con cautela</li>
                </ul>
            </div>

            <!-- FILTRI E RICERCA -->
            <div class="filters-container">
                <div class="filters-row">
                    <div class="form-group">
                        <label>Stato Utente</label>
                        <select class="filter-select">
                            <option value="">Tutti gli stati</option>
                            <option value="active">Attivo</option>
                            <option value="pending">In attesa</option>
                            <option value="inactive">Inattivo</option>
                            <option value="blocked">Bloccato</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Data Registrazione</label>
                        <select>
                            <option value="">Tutte le date</option>
                            <option value="today">Oggi</option>
                            <option value="week">Ultima settimana</option>
                            <option value="month">Ultimo mese</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button class="btn-primary" onclick="applyFilters('users')">
                            <i class="fas fa-filter"></i> Applica Filtri
                        </button>
                    </div>
                </div>
            </div>

            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" placeholder="Cerca per nome, email o ID..." data-table="users">
            </div>

            <!-- TABELLA UTENTI -->
            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Tutti gli Utenti</h3>
                    <div class="table-actions">
                        <button class="btn-primary" onclick="addNewUser()">
                            <i class="fas fa-plus"></i> Nuovo Utente
                        </button>
                        <button class="btn-secondary" onclick="exportCSV('users')">
                            <i class="fas fa-download"></i> Esporta CSV
                        </button>
                    </div>
                </div>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Email</th>
                            <th>Registrazione</th>
                            <th>Stato</th>
                            <th>Prenotazioni</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody id="users-tbody">
                        <!-- Caricati dinamicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- SEZIONE PROFESSIONISTI -->
        <div id="professionals-section" class="admin-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-user-tie"></i> Gestione Professionisti
                </h2>
                <p class="section-description">
                    Amministra tutti i professionisti e i loro servizi
                </p>
            </div>

            <div class="section-instructions">
                <h4><i class="fas fa-info-circle"></i> Istruzioni Professionisti</h4>
                <ul>
                    <li><strong>Stati:</strong> Attivo (può ricevere prenotazioni), In attesa (documentazione incompleta), Sospeso (violazioni), Verifica (documenti in controllo)</li>
                    <li><strong>Verifica documenti:</strong> Controlla certificazioni, assicurazione e documenti di identità</li>
                    <li><strong>Guadagni:</strong> Monitora le entrate mensili e commissioni</li>
                    <li><strong>Rating:</strong> Controlla recensioni e valutazioni clienti</li>
                </ul>
            </div>

            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" placeholder="Cerca professionisti..." data-table="professionals">
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Professionisti Registrati</h3>
                    <div class="table-actions">
                        <button class="btn-primary" onclick="addNewProfessional()">
                            <i class="fas fa-plus"></i> Nuovo Professionista
                        </button>
                        <button class="btn-warning" onclick="showSection('verification')">
                            <i class="fas fa-clipboard-check"></i> Verifiche Pendenti
                        </button>
                    </div>
                </div>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Email</th>
                            <th>Servizio</th>
                            <th>Stato</th>
                            <th>Rating</th>
                            <th>Guadagno Mensile</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody id="professionals-tbody">
                        <!-- Caricati dinamicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- SEZIONE PRENOTAZIONI -->
        <div id="bookings-section" class="admin-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-calendar"></i> Gestione Prenotazioni
                </h2>
                <p class="section-description">
                    Monitora e gestisci tutte le prenotazioni della piattaforma
                </p>
            </div>

            <div class="section-instructions">
                <h4><i class="fas fa-info-circle"></i> Istruzioni Prenotazioni</h4>
                <ul>
                    <li><strong>Stati prenotazione:</strong> Confermata (pagata), In attesa (da confermare), Completata (servizio erogato), Annullata</li>
                    <li><strong>Pagamenti:</strong> Controlla stato pagamenti e rimborsi</li>
                    <li><strong>Conflitti:</strong> Risolvi problemi tra clienti e professionisti</li>
                    <li><strong>Statistiche:</strong> Monitora trend prenotazioni e incassi</li>
                </ul>
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Prenotazioni Recenti</h3>
                    <div class="table-actions">
                        <button class="btn-warning" onclick="filterBookingsByStatus('problems')">
                            <i class="fas fa-exclamation-triangle"></i> Problemi (3)
                        </button>
                        <button class="btn-success" onclick="filterBookingsByStatus('pending')">
                            <i class="fas fa-check"></i> Da Confermare (12)
                        </button>
                    </div>
                </div>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Cliente</th>
                            <th>Professionista</th>
                            <th>Servizio</th>
                            <th>Data/Ora</th>
                            <th>Stato</th>
                            <th>Importo</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody id="bookings-tbody">
                        <!-- Caricati dinamicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- SEZIONE VERIFICHE -->
        <div id="verification-section" class="admin-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-clipboard-check"></i> Coda Verifiche
                </h2>
                <p class="section-description">
                    Verifica documenti e certificazioni dei professionisti
                </p>
            </div>

            <div class="section-instructions">
                <h4><i class="fas fa-info-circle"></i> Istruzioni Verifiche</h4>
                <ul>
                    <li><strong>Documenti richiesti:</strong> Carta identità, certificazioni professionali, assicurazione professionale, partita IVA</li>
                    <li><strong>Approvazione:</strong> Verifica autenticità e validità di tutti i documenti</li>
                    <li><strong>Richiesta info:</strong> Se documenti incompleti, specifica cosa manca</li>
                    <li><strong>Rifiuto:</strong> Solo per documenti falsi o non conformi - fornisci sempre motivo dettagliato</li>
                </ul>
            </div>

            <div class="alert alert-warning">
                <i class="fas fa-exclamation-triangle"></i>
                <strong>Attenzione:</strong> Controlla sempre l'autenticità dei documenti. In caso di dubbi, richiedi documentazione aggiuntiva.
            </div>

            <div id="verification-queue">
                <!-- Caricato dinamicamente -->
            </div>
        </div>

        <!-- SEZIONE SEGNALAZIONI -->
        <div id="reports-section" class="admin-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-exclamation-triangle"></i> Gestione Segnalazioni
                </h2>
                <p class="section-description">
                    Gestisci bug, problemi utenti e segnalazioni di contenuti
                </p>
            </div>

            <div class="section-instructions">
                <h4><i class="fas fa-info-circle"></i> Istruzioni Segnalazioni</h4>
                <ul>
                    <li><strong>Tipi:</strong> Bug (errori sistema), Contenuto (segnalazioni abusi), Utente (comportamenti scorretti), Pagamento (problemi transazioni), Tecnico (server/prestazioni)</li>
                    <li><strong>Priorità:</strong> Critica (sistema down), Alta (funzioni importanti), Media (miglioramenti), Bassa (cosmetici)</li>
                    <li><strong>Workflow:</strong> Nuova → Investigazione → Risolta → Chiusa</li>
                    <li><strong>Risposta:</strong> Rispondi sempre entro 24h per segnalazioni critiche/alte</li>
                </ul>
            </div>

            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Segnalazioni Aperte</h3>
                    <div class="table-actions">
                        <button class="btn-danger" onclick="filterReportsByPriority('critical')">
                            <i class="fas fa-fire"></i> Critiche (2)
                        </button>
                        <button class="btn-warning" onclick="filterReportsByPriority('high')">
                            <i class="fas fa-exclamation"></i> Alte (3)
                        </button>
                    </div>
                </div>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Titolo</th>
                            <th>Tipo</th>
                            <th>Priorità</th>
                            <th>Segnalato da</th>
                            <th>Data</th>
                            <th>Azioni</th>
                        </tr>
                    </thead>
                    <tbody id="reports-tbody">
                        <!-- Caricati dinamicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- SEZIONE CONTENUTI -->
        <div id="content-section" class="admin-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-edit"></i> Gestione Contenuti
                </h2>
                <p class="section-description">
                    Modifica testi, immagini e contenuti del sito web
                </p>
            </div>

            <div class="section-instructions">
                <h4><i class="fas fa-info-circle"></i> Istruzioni Contenuti</h4>
                <ul>
                    <li><strong>Homepage:</strong> Modifica hero section, servizi in evidenza, testimonial</li>
                    <li><strong>Pagine servizi:</strong> Aggiorna descrizioni, prezzi, categorie</li>
                    <li><strong>Legal:</strong> Mantieni aggiornati termini, privacy, cookie policy</li>
                    <li><strong>SEO:</strong> Ottimizza meta tag, description, keywords per ogni pagina</li>
                </ul>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label>Sezione da Modificare</label>
                    <select>
                        <option>Homepage - Hero Section</option>
                        <option>Homepage - Servizi</option>
                        <option>Chi Siamo</option>
                        <option>Servizi - Yoga</option>
                        <option>Servizi - Massaggi</option>
                        <option>Termini e Condizioni</option>
                        <option>Privacy Policy</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn-primary" onclick="editContent()">
                        <i class="fas fa-edit"></i> Modifica Contenuto
                    </button>
                </div>
            </div>

            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i>
                <strong>Nota:</strong> Le modifiche ai contenuti richiedono l'integrazione con il sistema di gestione contenuti (CMS).
            </div>
        </div>

        <!-- SEZIONE SISTEMA -->
        <div id="system-section" class="admin-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-cogs"></i> Impostazioni Sistema
                </h2>
                <p class="section-description">
                    Configurazioni generali, backup e manutenzione sistema
                </p>
            </div>

            <div class="section-instructions">
                <h4><i class="fas fa-info-circle"></i> Istruzioni Sistema</h4>
                <ul>
                    <li><strong>Backup:</strong> Esegui backup quotidiani del database - conserva copie per 30 giorni</li>
                    <li><strong>Performance:</strong> Monitora CPU, RAM, storage - ottimizza se necessario</li>
                    <li><strong>Sicurezza:</strong> Aggiorna password, certificati SSL, firewall</li>
                    <li><strong>Manutenzione:</strong> Pianifica downtime per aggiornamenti importanti</li>
                </ul>
            </div>

            <!-- STATUS SISTEMA -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" style="color: #10b981;">99.9%</div>
                    <div class="stat-label">Uptime Sistema</div>
                    <div class="stat-change positive">
                        <i class="fas fa-check-circle"></i> Operativo
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #3b82f6;">2.1 GB</div>
                    <div class="stat-label">Uso Database</div>
                    <div class="stat-change neutral">
                        <i class="fas fa-database"></i> 65% capacità
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #f59e0b;">156</div>
                    <div class="stat-label">Email in Coda</div>
                    <div class="stat-change warning">
                        <i class="fas fa-envelope"></i> Processing...
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #ef4444;">2</div>
                    <div class="stat-label">Errori Critici</div>
                    <div class="stat-change negative">
                        <i class="fas fa-exclamation-triangle"></i> Richiede attenzione
                    </div>
                </div>
            </div>

            <!-- AZIONI SISTEMA -->
            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Azioni Sistema</h3>
                </div>
                <div style="padding: 20px;">
                    <div class="d-flex gap-15" style="flex-wrap: wrap;">
                        <button class="btn-primary" onclick="backupDatabase()">
                            <i class="fas fa-save"></i> Backup Database
                        </button>
                        <button class="btn-warning" onclick="restartServices()">
                            <i class="fas fa-sync"></i> Riavvia Servizi
                        </button>
                        <button class="btn-secondary" onclick="generatePerformanceReport()">
                            <i class="fas fa-chart-bar"></i> Report Performance
                        </button>
                        <button class="btn-danger" onclick="enableMaintenanceMode()">
                            <i class="fas fa-exclamation-triangle"></i> Modalità Manutenzione
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- SEZIONE LOG -->
        <div id="logs-section" class="admin-section">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-list-alt"></i> Log di Sistema
                </h2>
                <p class="section-description">
                    Monitora tutti gli eventi e attività del sistema in tempo reale
                </p>
            </div>

            <div class="section-instructions">
                <h4><i class="fas fa-info-circle"></i> Istruzioni Log</h4>
                <ul>
                    <li><strong>Colori:</strong> Rosso (errori), Giallo (warning), Blu (info), Verde (successo)</li>
                    <li><strong>Filtri:</strong> Filtra per tipo, data, utente per trovare eventi specifici</li>
                    <li><strong>Export:</strong> Esporta log per analisi esterne o reportistica</li>
                    <li><strong>Retention:</strong> I log vengono conservati per 90 giorni, poi archiviati</li>
                </ul>
            </div>

            <div class="filters-container">
                <div class="filters-row">
                    <div class="form-group">
                        <label>Tipo Log</label>
                        <select>
                            <option value="">Tutti i tipi</option>
                            <option value="error">Errori</option>
                            <option value="warning">Warning</option>
                            <option value="info">Info</option>
                            <option value="success">Successo</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Periodo</label>
                        <select>
                            <option value="1h">Ultima ora</option>
                            <option value="24h">Ultime 24 ore</option>
                            <option value="7d">Ultima settimana</option>
                            <option value="30d">Ultimo mese</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button class="btn-secondary" onclick="exportLogs()">
                            <i class="fas fa-download"></i> Esporta Log
                        </button>
                    </div>
                </div>
            </div>

            <div id="logs-container" class="log-container">
                <!-- Caricati dinamicamente -->
            </div>
        </div>

    </div>

    <!-- MODAL GENERICO -->
    <div id="generic-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">Titolo Modal</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div id="modal-body">
                <!-- Contenuto dinamico -->
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script src="../assets/js/admin/dashboard-admin.js"></script>
</body>

</html>